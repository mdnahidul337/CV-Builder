<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Professional CV Builder with PDF Export</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="https://html2canvas.hertzen.com/dist/html2canvas.min.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background-color: #f5f7fa;
            color: #333;
            line-height: 1.6;
        }
        
        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 20px;
        }
        
        header {
            text-align: center;
            margin-bottom: 30px;
            padding: 25px;
            background: linear-gradient(135deg, #2c3e50, #1a2530);
            color: white;
            border-radius: 12px;
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.15);
        }
        
        header h1 {
            font-size: 2.8rem;
            margin-bottom: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 15px;
        }
        
        header p {
            font-size: 1.2rem;
            opacity: 0.9;
            max-width: 800px;
            margin: 0 auto;
        }
        
        .controls {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 25px;
            flex-wrap: wrap;
            gap: 15px;
        }
        
        .template-selector {
            display: flex;
            gap: 15px;
            align-items: center;
        }
        
        .template-btn {
            padding: 10px 20px;
            background: white;
            border: 2px solid #ddd;
            border-radius: 8px;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .template-btn.active {
            background: #3498db;
            color: white;
            border-color: #3498db;
        }
        
        .template-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 5px 10px rgba(0,0,0,0.1);
        }
        
        .action-buttons {
            display: flex;
            gap: 15px;
        }
        
        .action-btn {
            padding: 12px 25px;
            border: none;
            border-radius: 8px;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .edit-btn {
            background-color: #f39c12;
            color: white;
        }
        
        .edit-btn:hover {
            background-color: #d68910;
        }
        
        .pdf-btn {
            background-color: #e74c3c;
            color: white;
        }
        
        .pdf-btn:hover {
            background-color: #c0392b;
        }
        
        .save-btn {
            background-color: #2ecc71;
            color: white;
        }
        
        .save-btn:hover {
            background-color: #27ae60;
        }
        
        .main-content {
            display: flex;
            flex-wrap: wrap;
            gap: 30px;
        }
        
        .form-section {
            flex: 1;
            min-width: 350px;
            background: white;
            padding: 30px;
            border-radius: 12px;
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.08);
            transition: all 0.3s;
        }
        
        .preview-section {
            flex: 1.5;
            min-width: 350px;
            background: white;
            padding: 30px;
            border-radius: 12px;
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.08);
            overflow: auto;
        }
        
        .section-title {
            font-size: 1.6rem;
            color: #2c3e50;
            margin-bottom: 25px;
            padding-bottom: 12px;
            border-bottom: 3px solid #3498db;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .form-group {
            margin-bottom: 22px;
        }
        
        label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: #2c3e50;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        input, textarea, select {
            width: 100%;
            padding: 14px 18px;
            border: 1px solid #ddd;
            border-radius: 8px;
            font-size: 1rem;
            transition: all 0.3s;
        }
        
        input:focus, textarea:focus, select:focus {
            outline: none;
            border-color: #3498db;
            box-shadow: 0 0 0 3px rgba(52, 152, 219, 0.2);
        }
        
        textarea {
            resize: vertical;
            min-height: 120px;
        }
        
        .photo-upload {
            display: flex;
            align-items: center;
            gap: 25px;
        }
        
        .photo-preview {
            width: 130px;
            height: 160px;
            border: 2px dashed #ddd;
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            overflow: hidden;
            background-color: #f9f9f9;
        }
        
        .photo-preview img {
            max-width: 100%;
            max-height: 100%;
            display: none;
        }
        
        .upload-btn {
            background-color: #3498db;
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 8px;
            cursor: pointer;
            font-weight: 600;
            transition: background-color 0.3s;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .upload-btn:hover {
            background-color: #2980b9;
        }
        
        #photoInput {
            display: none;
        }
        
        .skills-container, .hobbies-container {
            display: flex;
            flex-wrap: wrap;
            gap: 12px;
            margin-top: 10px;
        }
        
        .skill-tag, .hobby-tag {
            background-color: #e1f0fa;
            color: #2c3e50;
            padding: 8px 16px;
            border-radius: 25px;
            font-size: 0.95rem;
            display: flex;
            align-items: center;
            gap: 8px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.05);
        }
        
        .skill-tag i, .hobby-tag i {
            cursor: pointer;
            color: #e74c3c;
            font-size: 0.9rem;
        }
        
        .add-btn {
            background-color: #2ecc71;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 8px;
            cursor: pointer;
            margin-top: 10px;
            font-weight: 600;
            transition: background-color 0.3s;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .add-btn:hover {
            background-color: #27ae60;
        }
        
        .form-buttons {
            display: flex;
            gap: 15px;
            margin-top: 30px;
        }
        
        .submit-btn, .reset-btn {
            flex: 1;
            padding: 16px;
            border: none;
            border-radius: 8px;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
        }
        
        .submit-btn {
            background-color: #2c3e50;
            color: white;
        }
        
        .submit-btn:hover {
            background-color: #1a2530;
        }
        
        .reset-btn {
            background-color: #e74c3c;
            color: white;
        }
        
        .reset-btn:hover {
            background-color: #c0392b;
        }
        
        /* CV Preview Styling - Multiple Templates */
        .cv-preview {
            font-size: 0.95rem;
            color: #333;
            line-height: 1.6;
            min-height: 800px;
            position: relative;
            padding: 30px;
            border: 1px solid #eee;
            border-radius: 8px;
            background-color: white;
        }
        
        /* Template 1 - Modern */
        .template-modern .cv-header {
            display: flex;
            align-items: center;
            gap: 30px;
            margin-bottom: 30px;
            padding-bottom: 25px;
            border-bottom: 3px solid #3498db;
        }
        
        .template-modern .cv-photo {
            width: 140px;
            height: 170px;
            border-radius: 8px;
            overflow: hidden;
            background-color: #f9f9f9;
            display: flex;
            align-items: center;
            justify-content: center;
            border: 2px solid #3498db;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }
        
        .template-modern .cv-personal-info h2 {
            font-size: 2.2rem;
            color: #2c3e50;
            margin-bottom: 8px;
        }
        
        .template-modern .cv-personal-info .cv-title {
            font-size: 1.2rem;
            color: #3498db;
            margin-bottom: 15px;
            font-weight: 600;
        }
        
        .template-modern .cv-contact {
            display: flex;
            flex-wrap: wrap;
            gap: 20px;
            margin-top: 15px;
            font-size: 0.95rem;
            color: #555;
        }
        
        .template-modern .cv-contact-item {
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .template-modern .cv-section {
            margin-bottom: 30px;
        }
        
        .template-modern .cv-section h3 {
            color: #2c3e50;
            margin-bottom: 15px;
            padding-bottom: 8px;
            border-bottom: 2px solid #f1f1f1;
            font-size: 1.4rem;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .template-modern .cv-section h3 i {
            color: #3498db;
        }
        
        .template-modern .cv-objective {
            font-style: italic;
            color: #555;
            background-color: #f9f9f9;
            padding: 15px;
            border-left: 4px solid #3498db;
            border-radius: 5px;
        }
        
        .template-modern .cv-list {
            padding-left: 20px;
        }
        
        .template-modern .cv-list li {
            margin-bottom: 8px;
        }
        
        .template-modern .cv-tags {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
        }
        
        .template-modern .cv-tag {
            background-color: #e1f0fa;
            color: #2c3e50;
            padding: 8px 15px;
            border-radius: 20px;
            font-size: 0.9rem;
        }
        
        /* Template 2 - Classic */
        .template-classic .cv-header {
            text-align: center;
            margin-bottom: 40px;
            padding-bottom: 30px;
            border-bottom: 2px solid #2c3e50;
        }
        
        .template-classic .cv-personal-info h2 {
            font-size: 2.5rem;
            color: #2c3e50;
            margin-bottom: 10px;
            text-transform: uppercase;
            letter-spacing: 2px;
        }
        
        .template-classic .cv-personal-info .cv-title {
            font-size: 1.3rem;
            color: #7f8c8d;
            margin-bottom: 20px;
            font-weight: 500;
        }
        
        .template-classic .cv-contact {
            display: flex;
            justify-content: center;
            flex-wrap: wrap;
            gap: 25px;
            margin-top: 20px;
            font-size: 1rem;
            color: #555;
        }
        
        .template-classic .cv-section {
            margin-bottom: 35px;
        }
        
        .template-classic .cv-section h3 {
            color: #2c3e50;
            margin-bottom: 15px;
            padding-bottom: 8px;
            border-bottom: 1px solid #ddd;
            font-size: 1.5rem;
            text-transform: uppercase;
            letter-spacing: 1px;
        }
        
        .template-classic .cv-content {
            padding-left: 20px;
        }
        
        .template-classic .cv-tags {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
        }
        
        .template-classic .cv-tag {
            background-color: #f1f1f1;
            color: #2c3e50;
            padding: 8px 15px;
            border-radius: 3px;
            font-size: 0.9rem;
            border-left: 3px solid #2c3e50;
        }
        
        /* Template 3 - Creative */
        .template-creative {
            background-color: #f9f9f9;
            border-radius: 15px;
            overflow: hidden;
        }
        
        .template-creative .cv-header {
            background: linear-gradient(135deg, #3498db, #2c3e50);
            color: white;
            padding: 40px;
            display: flex;
            align-items: center;
            gap: 40px;
            margin: -30px -30px 30px -30px;
        }
        
        .template-creative .cv-photo {
            width: 150px;
            height: 180px;
            border-radius: 10px;
            overflow: hidden;
            background-color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            border: 5px solid white;
            box-shadow: 0 10px 25px rgba(0,0,0,0.2);
        }
        
        .template-creative .cv-personal-info h2 {
            font-size: 2.5rem;
            margin-bottom: 10px;
        }
        
        .template-creative .cv-personal-info .cv-title {
            font-size: 1.3rem;
            opacity: 0.9;
            margin-bottom: 20px;
        }
        
        .template-creative .cv-contact {
            display: flex;
            flex-wrap: wrap;
            gap: 20px;
            margin-top: 15px;
        }
        
        .template-creative .cv-contact-item {
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .template-creative .cv-content {
            padding: 0 30px 30px;
        }
        
        .template-creative .cv-section {
            margin-bottom: 30px;
            background-color: white;
            padding: 25px;
            border-radius: 10px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.05);
        }
        
        .template-creative .cv-section h3 {
            color: #3498db;
            margin-bottom: 15px;
            padding-bottom: 10px;
            border-bottom: 2px solid #f1f1f1;
            font-size: 1.5rem;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .template-creative .cv-tags {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
        }
        
        .template-creative .cv-tag {
            background-color: #e1f0fa;
            color: #2c3e50;
            padding: 8px 15px;
            border-radius: 20px;
            font-size: 0.9rem;
        }
        
        .no-photo {
            color: #999;
            font-size: 0.9rem;
            text-align: center;
            padding: 10px;
        }
        
        footer {
            text-align: center;
            margin-top: 40px;
            padding: 25px;
            color: #7f8c8d;
            font-size: 0.95rem;
            border-top: 1px solid #eee;
        }
        
        .edit-mode .form-section {
            transform: scale(1.02);
            box-shadow: 0 15px 30px rgba(0, 0, 0, 0.15);
        }
        
        .edit-mode .preview-section {
            opacity: 0.8;
        }
        
        @media (max-width: 1100px) {
            .main-content {
                flex-direction: column;
            }
            
            .controls {
                flex-direction: column;
                align-items: flex-start;
            }
        }
        
        @media (max-width: 768px) {
            header h1 {
                font-size: 2.2rem;
                flex-direction: column;
                gap: 10px;
            }
            
            .template-creative .cv-header {
                flex-direction: column;
                text-align: center;
                gap: 25px;
            }
            
            .template-modern .cv-header {
                flex-direction: column;
                text-align: center;
                gap: 25px;
            }
            
            .action-buttons {
                flex-wrap: wrap;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1><i class="fas fa-file-alt"></i> Professional CV Builder</h1>
            <p>Create a professional resume with multiple templates, edit mode, and PDF export functionality</p>
        </header>
        
        <div class="controls">
            <div class="template-selector">
                <span style="font-weight: 600; color: #2c3e50;">CV Template:</span>
                <button class="template-btn active" data-template="modern">
                    <i class="fas fa-paint-brush"></i> Modern
                </button>
                <button class="template-btn" data-template="classic">
                    <i class="fas fa-building"></i> Classic
                </button>
                <button class="template-btn" data-template="creative">
                    <i class="fas fa-lightbulb"></i> Creative
                </button>
            </div>
            
            <div class="action-buttons">
                <button class="action-btn edit-btn" id="editModeBtn">
                    <i class="fas fa-edit"></i> Edit Mode
                </button>
                <button class="action-btn save-btn" id="saveDataBtn">
                    <i class="fas fa-save"></i> Save Data
                </button>
                <button class="action-btn pdf-btn" id="downloadPdfBtn">
                    <i class="fas fa-file-pdf"></i> Download PDF
                </button>
            </div>
        </div>
        
        <div class="main-content">
            <!-- Form Section -->
            <section class="form-section" id="formSection">
                <h2 class="section-title"><i class="fas fa-edit"></i> Personal Details</h2>
                
                <form id="cvForm">
                    <div class="form-group photo-upload">
                        <div class="photo-preview">
                            <img id="photoPreview" src="" alt="Photo Preview">
                            <span class="no-photo">No photo uploaded</span>
                        </div>
                        <div>
                            <label for="photoInput"><i class="fas fa-camera"></i> Upload Passport Size Photo</label>
                            <button type="button" class="upload-btn" id="uploadPhotoBtn">
                                <i class="fas fa-upload"></i> Choose Photo
                            </button>
                            <input type="file" id="photoInput" accept="image/*">
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <label for="fullName"><i class="fas fa-user"></i> Full Name *</label>
                        <input type="text" id="fullName" placeholder="John Doe" required>
                    </div>
                    
                    <div class="form-group">
                        <label for="jobTitle"><i class="fas fa-briefcase"></i> Job Title</label>
                        <input type="text" id="jobTitle" placeholder="Software Developer">
                    </div>
                    
                    <div class="form-group">
                        <label for="mobileNumber"><i class="fas fa-phone"></i> Mobile Number *</label>
                        <input type="tel" id="mobileNumber" placeholder="+1 234 567 8900" required>
                    </div>
                    
                    <div class="form-group">
                        <label for="email"><i class="fas fa-envelope"></i> Email Address *</label>
                        <input type="email" id="email" placeholder="john.doe@example.com" required>
                    </div>
                    
                    <div class="form-group">
                        <label for="homeAddress"><i class="fas fa-home"></i> Home Address</label>
                        <textarea id="homeAddress" placeholder="123 Main Street, New York, NY 10001"></textarea>
                    </div>
                    
                    <div class="form-group">
                        <label for="jobObjective"><i class="fas fa-bullseye"></i> Job Objective</label>
                        <textarea id="jobObjective" placeholder="Seeking a challenging position in a reputable organization..."></textarea>
                    </div>
                    
                    <div class="form-group">
                        <label for="workExperience"><i class="fas fa-history"></i> Work Experience (Leave blank if Fresher)</label>
                        <textarea id="workExperience" placeholder="Software Developer at XYZ Corp (2020-2023)&#10;- Developed web applications&#10;- Managed database systems"></textarea>
                    </div>
                    
                    <div class="form-group">
                        <label for="education"><i class="fas fa-graduation-cap"></i> Education</label>
                        <textarea id="education" placeholder="Bachelor of Science in Computer Science&#10;University of Technology (2016-2020)&#10;GPA: 3.8/4.0"></textarea>
                    </div>
                    
                    <div class="form-group">
                        <label for="technicalQualification"><i class="fas fa-certificate"></i> Technical Qualification</label>
                        <textarea id="technicalQualification" placeholder="Certified Web Developer (2021)&#10;Microsoft Azure Fundamentals (2022)"></textarea>
                    </div>
                    
                    <div class="form-group">
                        <label for="dateOfBirth"><i class="fas fa-birthday-cake"></i> Date of Birth</label>
                        <input type="date" id="dateOfBirth">
                    </div>
                    
                    <div class="form-group">
                        <label for="fatherName"><i class="fas fa-user-friends"></i> Father's Name</label>
                        <input type="text" id="fatherName" placeholder="Robert Doe">
                    </div>
                    
                    <div class="form-group">
                        <label for="maritalStatus"><i class="fas fa-heart"></i> Marital Status</label>
                        <select id="maritalStatus">
                            <option value="">Select</option>
                            <option value="Single">Single</option>
                            <option value="Married">Married</option>
                            <option value="Divorced">Divorced</option>
                            <option value="Widowed">Widowed</option>
                        </select>
                    </div>
                    
                    <div class="form-group">
                        <label for="languages"><i class="fas fa-language"></i> Languages Known</label>
                        <input type="text" id="languages" placeholder="English, Spanish, French">
                    </div>
                    
                    <div class="form-group">
                        <label for="skills"><i class="fas fa-tools"></i> Skills (Add one at a time)</label>
                        <div class="skills-container" id="skillsContainer"></div>
                        <div style="display: flex; gap: 10px; margin-top: 15px;">
                            <input type="text" id="skillInput" placeholder="JavaScript, React, Node.js" style="flex: 1;">
                            <button type="button" class="add-btn" id="addSkillBtn"><i class="fas fa-plus"></i> Add</button>
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <label for="hobbies"><i class="fas fa-heart"></i> Hobbies (Add one at a time)</label>
                        <div class="hobbies-container" id="hobbiesContainer"></div>
                        <div style="display: flex; gap: 10px; margin-top: 15px;">
                            <input type="text" id="hobbyInput" placeholder="Reading, Traveling, Photography" style="flex: 1;">
                            <button type="button" class="add-btn" id="addHobbyBtn"><i class="fas fa-plus"></i> Add</button>
                        </div>
                    </div>
                    
                    <div class="form-buttons">
                        <button type="submit" class="submit-btn"><i class="fas fa-file-download"></i> Generate CV</button>
                        <button type="button" class="reset-btn" id="resetBtn"><i class="fas fa-redo"></i> Reset Form</button>
                    </div>
                </form>
            </section>
            
            <!-- Preview Section -->
            <section class="preview-section">
                <h2 class="section-title"><i class="fas fa-eye"></i> CV Preview</h2>
                <div class="cv-preview template-modern" id="cvPreview">
                    <!-- Preview content will be generated dynamically -->
                </div>
            </section>
        </div>
        
        <footer>
            <p>Professional CV Builder &copy; 2023 | Features: Multiple Templates, Edit Mode, PDF Export, Local Storage</p>
        </footer>
    </div>

    <script>
        // Initialize jsPDF
        const { jsPDF } = window.jspdf;
        
        // DOM Elements
        const cvForm = document.getElementById('cvForm');
        const photoInput = document.getElementById('photoInput');
        const uploadPhotoBtn = document.getElementById('uploadPhotoBtn');
        const photoPreview = document.getElementById('photoPreview');
        const resetBtn = document.getElementById('resetBtn');
        const editModeBtn = document.getElementById('editModeBtn');
        const saveDataBtn = document.getElementById('saveDataBtn');
        const downloadPdfBtn = document.getElementById('downloadPdfBtn');
        const templateBtns = document.querySelectorAll('.template-btn');
        
        // Skill and Hobby Management
        const skillsContainer = document.getElementById('skillsContainer');
        const hobbiesContainer = document.getElementById('hobbiesContainer');
        const skillInput = document.getElementById('skillInput');
        const hobbyInput = document.getElementById('hobbyInput');
        const addSkillBtn = document.getElementById('addSkillBtn');
        const addHobbyBtn = document.getElementById('addHobbyBtn');
        
        // CV Preview Element
        const cvPreview = document.getElementById('cvPreview');
        
        // Current state
        let currentTemplate = 'modern';
        let editMode = false;
        let cvData = {
            skills: [],
            hobbies: []
        };
        
        // Initialize with sample data for demo
        document.addEventListener('DOMContentLoaded', function() {
            // Try to load saved data
            loadSavedData();
            
            // If no saved data, load demo data
            if (!localStorage.getItem('cvData')) {
                loadDemoData();
            }
            
            // Set up template selection
            setupTemplateSelection();
            
            // Update preview with initial values
            updatePreview();
            
            // Add event listeners
            setupEventListeners();
        });
        
        function loadDemoData() {
            // Set default values for demo
            document.getElementById('fullName').value = "Johnathan Smith";
            document.getElementById('jobTitle').value = "Senior Software Developer";
            document.getElementById('mobileNumber').value = "+1 (123) 456-7890";
            document.getElementById('email').value = "john.smith@example.com";
            document.getElementById('homeAddress').value = "123 Main Street, New York, NY 10001";
            document.getElementById('jobObjective').value = "Seeking a challenging position in a reputable organization to expand my learnings, knowledge, and skills. Secure a responsible career opportunity to fully utilize my training and skills, while making a significant contribution to the success of the company.";
            document.getElementById('workExperience').value = "Software Developer at Tech Solutions Inc. (2020-2023)\n- Developed responsive web applications using React and Node.js\n- Collaborated with cross-functional teams to design and implement new features\n- Optimized application performance, reducing load times by 40%\n\nJunior Developer at WebCraft Studio (2018-2020)\n- Built and maintained client websites using HTML, CSS, and JavaScript\n- Implemented SEO best practices resulting in 30% increase in organic traffic";
            document.getElementById('education').value = "Bachelor of Science in Computer Science\nUniversity of Technology (2016-2020)\nGPA: 3.8/4.0\n\nHigh School Diploma\nCity High School (2014-2016)";
            document.getElementById('technicalQualification').value = "Certified Web Developer - W3Schools (2021)\nMicrosoft Azure Fundamentals (2022)\nGoogle Analytics Certified (2020)";
            document.getElementById('dateOfBirth').value = "1998-05-15";
            document.getElementById('fatherName').value = "Robert Smith";
            document.getElementById('maritalStatus').value = "Single";
            document.getElementById('languages').value = "English (Native), Spanish (Intermediate), French (Basic)";
            
            // Add default skills
            const defaultSkills = ["HTML5", "CSS3", "JavaScript", "React", "Node.js", "Git", "Responsive Design", "REST APIs"];
            defaultSkills.forEach(skill => addSkillToContainer(skill));
            
            // Add default hobbies
            const defaultHobbies = ["Reading Tech Blogs", "Photography", "Hiking", "Playing Guitar", "Traveling"];
            defaultHobbies.forEach(hobby => addHobbyToContainer(hobby));
        }
        
        function loadSavedData() {
            const savedData = localStorage.getItem('cvData');
            if (savedData) {
                try {
                    const data = JSON.parse(savedData);
                    
                    // Load form fields
                    Object.keys(data).forEach(key => {
                        if (key !== 'skills' && key !== 'hobbies' && key !== 'photo') {
                            const element = document.getElementById(key);
                            if (element) {
                                element.value = data[key];
                            }
                        }
                    });
                    
                    // Load skills and hobbies
                    if (data.skills && Array.isArray(data.skills)) {
                        data.skills.forEach(skill => addSkillToContainer(skill));
                    }
                    
                    if (data.hobbies && Array.isArray(data.hobbies)) {
                        data.hobbies.forEach(hobby => addHobbyToContainer(hobby));
                    }
                    
                    // Load photo if available
                    if (data.photo) {
                        photoPreview.src = data.photo;
                        photoPreview.style.display = 'block';
                        document.querySelector('.photo-preview .no-photo').style.display = 'none';
                    }
                    
                    console.log('Data loaded from local storage');
                } catch (e) {
                    console.error('Error loading saved data:', e);
                }
            }
        }
        
        function setupEventListeners() {
            // Photo Upload Functionality
            uploadPhotoBtn.addEventListener('click', function() {
                photoInput.click();
            });
            
            photoInput.addEventListener('change', function() {
                const file = this.files[0];
                if (file) {
                    const reader = new FileReader();
                    
                    reader.addEventListener('load', function() {
                        photoPreview.src = reader.result;
                        photoPreview.style.display = 'block';
                        document.querySelector('.photo-preview .no-photo').style.display = 'none';
                    });
                    
                    reader.readAsDataURL(file);
                }
            });
            
            // Add Skill Functionality
            addSkillBtn.addEventListener('click', function() {
                const skill = skillInput.value.trim();
                if (skill) {
                    addSkillToContainer(skill);
                    skillInput.value = '';
                    updateSkillsPreview();
                    saveFormData();
                }
            });
            
            // Add Hobby Functionality
            addHobbyBtn.addEventListener('click', function() {
                const hobby = hobbyInput.value.trim();
                if (hobby) {
                    addHobbyToContainer(hobby);
                    hobbyInput.value = '';
                    updateHobbiesPreview();
                    saveFormData();
                }
            });
            
            // Enter key for adding skills and hobbies
            skillInput.addEventListener('keypress', function(e) {
                if (e.key === 'Enter') {
                    addSkillBtn.click();
                    e.preventDefault();
                }
            });
            
            hobbyInput.addEventListener('keypress', function(e) {
                if (e.key === 'Enter') {
                    addHobbyBtn.click();
                    e.preventDefault();
                }
            });
            
            // Form Submit Handler
            cvForm.addEventListener('submit', function(e) {
                e.preventDefault();
                updatePreview();
                showNotification('CV updated successfully!', 'success');
            });
            
            // Reset Form Handler
            resetBtn.addEventListener('click', function() {
                if (confirm('Are you sure you want to reset all form data? This cannot be undone.')) {
                    cvForm.reset();
                    
                    // Clear photo preview
                    photoPreview.src = '';
                    photoPreview.style.display = 'none';
                    document.querySelector('.photo-preview .no-photo').style.display = 'block';
                    
                    // Clear skills and hobbies containers
                    skillsContainer.innerHTML = '';
                    hobbiesContainer.innerHTML = '';
                    
                    // Clear saved data
                    localStorage.removeItem('cvData');
                    
                    // Reset preview
                    updatePreview();
                    
                    showNotification('Form has been reset', 'info');
                }
            });
            
            // Edit Mode Toggle
            editModeBtn.addEventListener('click', function() {
                editMode = !editMode;
                const formSection = document.getElementById('formSection');
                
                if (editMode) {
                    formSection.classList.add('edit-mode');
                    editModeBtn.innerHTML = '<i class="fas fa-times"></i> Exit Edit Mode';
                    editModeBtn.style.backgroundColor = '#e74c3c';
                    showNotification('Edit mode enabled', 'info');
                } else {
                    formSection.classList.remove('edit-mode');
                    editModeBtn.innerHTML = '<i class="fas fa-edit"></i> Edit Mode';
                    editModeBtn.style.backgroundColor = '#f39c12';
                }
            });
            
            // Save Data Button
            saveDataBtn.addEventListener('click', function() {
                saveFormData();
                showNotification('Data saved successfully!', 'success');
            });
            
            // Download PDF Button
            downloadPdfBtn.addEventListener('click', function() {
                downloadPDF();
            });
            
            // Real-time form updates to preview
            cvForm.addEventListener('input', function() {
                updatePreview();
                // Auto-save after a delay
                clearTimeout(window.saveTimeout);
                window.saveTimeout = setTimeout(saveFormData, 1000);
            });
            
            // Auto-save when photo is uploaded
            photoInput.addEventListener('change', function() {
                setTimeout(saveFormData, 500);
            });
        }
        
        function setupTemplateSelection() {
            templateBtns.forEach(btn => {
                btn.addEventListener('click', function() {
                    // Remove active class from all buttons
                    templateBtns.forEach(b => b.classList.remove('active'));
                    
                    // Add active class to clicked button
                    this.classList.add('active');
                    
                    // Update template
                    currentTemplate = this.getAttribute('data-template');
                    updatePreview();
                    
                    showNotification(`Template changed to ${currentTemplate}`, 'info');
                });
            });
        }
        
        function addSkillToContainer(skill) {
            const skillTag = document.createElement('div');
            skillTag.className = 'skill-tag';
            skillTag.innerHTML = `
                ${skill}
                <i class="fas fa-times remove-skill"></i>
            `;
            
            skillTag.querySelector('.remove-skill').addEventListener('click', function() {
                skillTag.remove();
                updateSkillsPreview();
                saveFormData();
            });
            
            skillsContainer.appendChild(skillTag);
            
            // Add to data
            if (!cvData.skills.includes(skill)) {
                cvData.skills.push(skill);
            }
        }
        
        function addHobbyToContainer(hobby) {
            const hobbyTag = document.createElement('div');
            hobbyTag.className = 'hobby-tag';
            hobbyTag.innerHTML = `
                ${hobby}
                <i class="fas fa-times remove-hobby"></i>
            `;
            
            hobbyTag.querySelector('.remove-hobby').addEventListener('click', function() {
                hobbyTag.remove();
                updateHobbiesPreview();
                saveFormData();
            });
            
            hobbiesContainer.appendChild(hobbyTag);
            
            // Add to data
            if (!cvData.hobbies.includes(hobby)) {
                cvData.hobbies.push(hobby);
            }
        }
        
        function updateSkillsPreview() {
            // Update data from UI
            const skillTags = document.querySelectorAll('.skill-tag');
            cvData.skills = Array.from(skillTags).map(tag => 
                tag.childNodes[0].textContent.trim()
            );
        }
        
        function updateHobbiesPreview() {
            // Update data from UI
            const hobbyTags = document.querySelectorAll('.hobby-tag');
            cvData.hobbies = Array.from(hobbyTags).map(tag => 
                tag.childNodes[0].textContent.trim()
            );
        }
        
        function updatePreview() {
            // Get form values
            const formData = {
                fullName: document.getElementById('fullName').value || 'Your Full Name',
                jobTitle: document.getElementById('jobTitle').value || 'Professional',
                mobileNumber: document.getElementById('mobileNumber').value || 'Not specified',
                email: document.getElementById('email').value || 'Not specified',
                homeAddress: document.getElementById('homeAddress').value || 'Not specified',
                jobObjective: document.getElementById('jobObjective').value || 'Your job objective will appear here.',
                workExperience: document.getElementById('workExperience').value || 'Your work experience will appear here. If you\'re a fresher, you can leave this section blank.',
                education: document.getElementById('education').value || 'Your educational qualifications will appear here.',
                technicalQualification: document.getElementById('technicalQualification').value || 'Your technical qualifications will appear here.',
                dateOfBirth: document.getElementById('dateOfBirth').value,
                fatherName: document.getElementById('fatherName').value || 'Not specified',
                maritalStatus: document.getElementById('maritalStatus').value || 'Not specified',
                languages: document.getElementById('languages').value || 'Not specified',
                photo: photoPreview.src || ''
            };
            
            // Update skills and hobbies data
            updateSkillsPreview();
            updateHobbiesPreview();
            
            // Generate HTML based on template
            cvPreview.className = `cv-preview template-${currentTemplate}`;
            cvPreview.innerHTML = generateTemplateHTML(currentTemplate, formData);
        }
        
        function generateTemplateHTML(template, data) {
            // Format date of birth
            const dobFormatted = data.dateOfBirth ? formatDate(data.dateOfBirth) : 'Not specified';
            
            // Get photo HTML
            const photoHTML = data.photo ? 
                `<img src="${data.photo}" alt="${data.fullName}" style="max-width:100%; max-height:100%;">` :
                '<span class="no-photo">No photo uploaded</span>';
            
            // Format work experience and education with line breaks
            const workExpHTML = data.workExperience.replace(/\n/g, '<br>');
            const educationHTML = data.education.replace(/\n/g, '<br>');
            const technicalHTML = data.technicalQualification.replace(/\n/g, '<br>');
            
            // Generate skills and hobbies tags
            const skillsHTML = cvData.skills.map(skill => `<span class="cv-tag">${skill}</span>`).join('');
            const hobbiesHTML = cvData.hobbies.map(hobby => `<span class="cv-tag">${hobby}</span>`).join('');
            
            if (template === 'modern') {
                return `
                    <div class="cv-header">
                        <div class="cv-photo">
                            ${photoHTML}
                        </div>
                        <div class="cv-personal-info">
                            <h2>${data.fullName}</h2>
                            <div class="cv-title">${data.jobTitle}</div>
                            <div class="cv-contact">
                                <div class="cv-contact-item">
                                    <i class="fas fa-phone"></i>
                                    <span>${data.mobileNumber}</span>
                                </div>
                                <div class="cv-contact-item">
                                    <i class="fas fa-envelope"></i>
                                    <span>${data.email}</span>
                                </div>
                                <div class="cv-contact-item">
                                    <i class="fas fa-home"></i>
                                    <span>${data.homeAddress}</span>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="cv-section">
                        <h3><i class="fas fa-bullseye"></i> Job Objective</h3>
                        <p class="cv-objective">${data.jobObjective}</p>
                    </div>
                    
                    <div class="cv-section">
                        <h3><i class="fas fa-briefcase"></i> Work Experience</h3>
                        <p>${workExpHTML}</p>
                    </div>
                    
                    <div class="cv-section">
                        <h3><i class="fas fa-graduation-cap"></i> Education</h3>
                        <p>${educationHTML}</p>
                    </div>
                    
                    <div class="cv-section">
                        <h3><i class="fas fa-certificate"></i> Technical Qualification</h3>
                        <p>${technicalHTML}</p>
                    </div>
                    
                    <div class="cv-section">
                        <h3><i class="fas fa-user"></i> Personal Details</h3>
                        <p><strong>Date of Birth:</strong> ${dobFormatted}</p>
                        <p><strong>Father's Name:</strong> ${data.fatherName}</p>
                        <p><strong>Marital Status:</strong> ${data.maritalStatus}</p>
                        <p><strong>Languages Known:</strong> ${data.languages}</p>
                    </div>
                    
                    <div class="cv-section">
                        <h3><i class="fas fa-tools"></i> Skills</h3>
                        <div class="cv-tags">${skillsHTML}</div>
                    </div>
                    
                    <div class="cv-section">
                        <h3><i class="fas fa-heart"></i> Hobbies</h3>
                        <div class="cv-tags">${hobbiesHTML}</div>
                    </div>
                `;
            } else if (template === 'classic') {
                return `
                    <div class="cv-header">
                        <div class="cv-personal-info">
                            <h2>${data.fullName}</h2>
                            <div class="cv-title">${data.jobTitle}</div>
                            <div class="cv-contact">
                                <div class="cv-contact-item">
                                    <i class="fas fa-phone"></i>
                                    <span>${data.mobileNumber}</span>
                                </div>
                                <div class="cv-contact-item">
                                    <i class="fas fa-envelope"></i>
                                    <span>${data.email}</span>
                                </div>
                                <div class="cv-contact-item">
                                    <i class="fas fa-home"></i>
                                    <span>${data.homeAddress}</span>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="cv-section">
                        <h3>Career Objective</h3>
                        <div class="cv-content">
                            <p>${data.jobObjective}</p>
                        </div>
                    </div>
                    
                    <div class="cv-section">
                        <h3>Work Experience</h3>
                        <div class="cv-content">
                            <p>${workExpHTML}</p>
                        </div>
                    </div>
                    
                    <div class="cv-section">
                        <h3>Education</h3>
                        <div class="cv-content">
                            <p>${educationHTML}</p>
                        </div>
                    </div>
                    
                    <div class="cv-section">
                        <h3>Technical Qualification</h3>
                        <div class="cv-content">
                            <p>${technicalHTML}</p>
                        </div>
                    </div>
                    
                    <div class="cv-section">
                        <h3>Personal Details</h3>
                        <div class="cv-content">
                            <p><strong>Date of Birth:</strong> ${dobFormatted}</p>
                            <p><strong>Father's Name:</strong> ${data.fatherName}</p>
                            <p><strong>Marital Status:</strong> ${data.maritalStatus}</p>
                            <p><strong>Languages Known:</strong> ${data.languages}</p>
                        </div>
                    </div>
                    
                    <div class="cv-section">
                        <h3>Skills</h3>
                        <div class="cv-tags">${skillsHTML}</div>
                    </div>
                    
                    <div class="cv-section">
                        <h3>Hobbies</h3>
                        <div class="cv-tags">${hobbiesHTML}</div>
                    </div>
                `;
            } else if (template === 'creative') {
                return `
                    <div class="cv-header">
                        <div class="cv-photo">
                            ${photoHTML}
                        </div>
                        <div class="cv-personal-info">
                            <h2>${data.fullName}</h2>
                            <div class="cv-title">${data.jobTitle}</div>
                            <div class="cv-contact">
                                <div class="cv-contact-item">
                                    <i class="fas fa-phone"></i>
                                    <span>${data.mobileNumber}</span>
                                </div>
                                <div class="cv-contact-item">
                                    <i class="fas fa-envelope"></i>
                                    <span>${data.email}</span>
                                </div>
                                <div class="cv-contact-item">
                                    <i class="fas fa-home"></i>
                                    <span>${data.homeAddress}</span>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="cv-content">
                        <div class="cv-section">
                            <h3><i class="fas fa-bullseye"></i> Career Objective</h3>
                            <p>${data.jobObjective}</p>
                        </div>
                        
                        <div class="cv-section">
                            <h3><i class="fas fa-briefcase"></i> Professional Experience</h3>
                            <p>${workExpHTML}</p>
                        </div>
                        
                        <div class="cv-section">
                            <h3><i class="fas fa-graduation-cap"></i> Education</h3>
                            <p>${educationHTML}</p>
                        </div>
                        
                        <div class="cv-section">
                            <h3><i class="fas fa-certificate"></i> Certifications</h3>
                            <p>${technicalHTML}</p>
                        </div>
                        
                        <div class="cv-section">
                            <h3><i class="fas fa-user"></i> Personal Information</h3>
                            <p><strong>Date of Birth:</strong> ${dobFormatted}</p>
                            <p><strong>Father's Name:</strong> ${data.fatherName}</p>
                            <p><strong>Marital Status:</strong> ${data.maritalStatus}</p>
                            <p><strong>Languages Known:</strong> ${data.languages}</p>
                        </div>
                        
                        <div class="cv-section">
                            <h3><i class="fas fa-tools"></i> Technical Skills</h3>
                            <div class="cv-tags">${skillsHTML}</div>
                        </div>
                        
                        <div class="cv-section">
                            <h3><i class="fas fa-heart"></i> Interests & Hobbies</h3>
                            <div class="cv-tags">${hobbiesHTML}</div>
                        </div>
                    </div>
                `;
            }
            
            return '';
        }
        
        function saveFormData() {
            const formData = {
                fullName: document.getElementById('fullName').value,
                jobTitle: document.getElementById('jobTitle').value,
                mobileNumber: document.getElementById('mobileNumber').value,
                email: document.getElementById('email').value,
                homeAddress: document.getElementById('homeAddress').value,
                jobObjective: document.getElementById('jobObjective').value,
                workExperience: document.getElementById('workExperience').value,
                education: document.getElementById('education').value,
                technicalQualification: document.getElementById('technicalQualification').value,
                dateOfBirth: document.getElementById('dateOfBirth').value,
                fatherName: document.getElementById('fatherName').value,
                maritalStatus: document.getElementById('maritalStatus').value,
                languages: document.getElementById('languages').value,
                photo: photoPreview.src || '',
                skills: cvData.skills,
                hobbies: cvData.hobbies,
                template: currentTemplate
            };
            
            // Save to localStorage
            localStorage.setItem('cvData', JSON.stringify(formData));
        }
        
        async function downloadPDF() {
            // Show loading message
            showNotification('Generating PDF...', 'info');
            
            try {
                // Use html2canvas to capture the CV preview
                const canvas = await html2canvas(cvPreview, {
                    scale: 2,
                    useCORS: true,
                    logging: false,
                    backgroundColor: '#ffffff'
                });
                
                const imgData = canvas.toDataURL('image/png');
                const pdf = new jsPDF('p', 'mm', 'a4');
                
                // Calculate dimensions
                const pageWidth = pdf.internal.pageSize.getWidth();
                const pageHeight = pdf.internal.pageSize.getHeight();
                const imgWidth = pageWidth - 20; // 10mm margin on each side
                const imgHeight = (canvas.height * imgWidth) / canvas.width;
                
                // Add image to PDF
                pdf.addImage(imgData, 'PNG', 10, 10, imgWidth, imgHeight);
                
                // Add footer with timestamp
                const timestamp = new Date().toLocaleString();
                pdf.setFontSize(10);
                pdf.setTextColor(150);
                pdf.text(`Generated on ${timestamp} - Professional CV Builder`, pageWidth / 2, pageHeight - 10, { align: 'center' });
                
                // Save the PDF
                pdf.save(`${document.getElementById('fullName').value || 'CV'}_${currentTemplate}.pdf`);
                
                showNotification('PDF downloaded successfully!', 'success');
            } catch (error) {
                console.error('Error generating PDF:', error);
                showNotification('Error generating PDF. Please try again.', 'error');
            }
        }
        
        function formatDate(dateString) {
            if (!dateString) return '';
            const date = new Date(dateString);
            return date.toLocaleDateString('en-US', { year: 'numeric', month: 'long', day: 'numeric' });
        }
        
        function showNotification(message, type) {
            // Remove any existing notifications
            const existingNotification = document.querySelector('.notification');
            if (existingNotification) {
                existingNotification.remove();
            }
            
            // Create notification element
            const notification = document.createElement('div');
            notification.className = `notification notification-${type}`;
            notification.innerHTML = `
                <span>${message}</span>
                <button class="notification-close"><i class="fas fa-times"></i></button>
            `;
            
            // Add styles for notification
            const style = document.createElement('style');
            style.textContent = `
                .notification {
                    position: fixed;
                    top: 20px;
                    right: 20px;
                    padding: 15px 20px;
                    border-radius: 8px;
                    color: white;
                    font-weight: 600;
                    display: flex;
                    align-items: center;
                    justify-content: space-between;
                    gap: 15px;
                    min-width: 300px;
                    max-width: 400px;
                    z-index: 1000;
                    box-shadow: 0 5px 15px rgba(0,0,0,0.2);
                    animation: slideIn 0.3s ease-out;
                }
                
                .notification-success { background-color: #2ecc71; }
                .notification-info { background-color: #3498db; }
                .notification-error { background-color: #e74c3c; }
                
                .notification-close {
                    background: none;
                    border: none;
                    color: white;
                    cursor: pointer;
                    font-size: 1.2rem;
                }
                
                @keyframes slideIn {
                    from { transform: translateX(100%); opacity: 0; }
                    to { transform: translateX(0); opacity: 1; }
                }
            `;
            
            document.head.appendChild(style);
            document.body.appendChild(notification);
            
            // Add close button functionality
            notification.querySelector('.notification-close').addEventListener('click', function() {
                notification.remove();
            });
            
            // Auto remove after 5 seconds
            setTimeout(() => {
                if (notification.parentNode) {
                    notification.remove();
                }
            }, 5000);
        }
    </script>
</body>
</html>
